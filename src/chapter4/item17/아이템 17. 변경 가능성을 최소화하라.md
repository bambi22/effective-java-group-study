# 💡 불변 클래스란?
* 인스턴스의 내부 값을 수정할 수 없는 클래스
* 불변 인스턴스에 간직된 정보는 객체가 파괴되는 순간까지 절대 달라지지 않는다.
* 불변클래스는 가변 클래스보다 설계와 구현이 용이하며, 오류가 생길 여지가 적고 안전하다.
* 자바 플랫폼 라이브러리는 다양한 불변 클래스를 제공한다.
  * String을 비롯한 박싱타입 클래스(Integer, Double..)

# 💡 불변 클래스를 만드는 5가지 규칙
1. 객체의 상태를 변경하는 메서드(변경자)를 제공하지 않는다.
2. 클래스를 확장할 수 없도록 한다. (상속 금지)
3. 모든 필드를 final로 선언한다.
4. 모든 필드를 private으로 선언한다.
5. 자신 외에는 내부의 가변 컴포넌트에 접근할 수 없도록 해야 한다.

# 💡 불변 클래스 예제
먼저 다음 코드를 보고 문제점을 찾아보자.
```java
public class Member {

    private String name;
    private int age;

    public Member(String name, int age) {
        this.name = name;
        this.age = age;
    }
    ...(Getter, Setter)
}
```
```java
public final class TeamV1 {

    private final int ranking;
    private final Member owner;
    private final List<Member> members;

    private TeamV1(int ranking, Member owner, List<Member> members) {
        this.ranking = ranking;
        this.owner = owner;
        this.members = members;
    }

    public static TeamV1 valueOf(int ranking, Member representative, List<Member> members) {
        return new TeamV1(ranking, representative, members);
    }

    public int getRanking() {
        return ranking;
    }

    public Member getOwner() {
        return owner;
    }

    public List<Member> getMembers() {
        return members;
    }
}
```
* TeamV1클래스는 책의 내용대로 잘 설계된 불변 클래스처럼 보인다.
* 문제는 참조타입 필드인 Member와 참조타입을 요소로 갖는 컬렉션을 필드로 가진다는 점이다.
* 다음 테스트 코드를 살펴보자.
```java
public static void main(String[] args) {

     Member owner = new Member("owner", 30);

     Member member1 = new Member("member1", 10);
     Member member2 = new Member("member2", 20);

     ArrayList<Member> members = new ArrayList<>();
     members.add(member1);
     members.add(member2);

     // TeamV1은 불변인 것처럼 보인다.
     TeamV1 teamV1 = TeamV1.valueOf(10, owner, members);
     owner.setAge(40);
     members.add(new Member("member3", 30));

     // TeamV1 내부의 상태가 변경되었다.
     System.out.println("teamV1.owner.age = " + teamV1.getOwner().getAge()); //40
     System.out.println("teamV1.members.size = " + teamV1.getMembers().size()); //3
 }
```
* 불변 객체인 줄 알았던 teamV1 내부의 상태가 변경된 것을 확인할 수 있다.
* :qu그럼 어떻게 해결해야 할까?
* 
